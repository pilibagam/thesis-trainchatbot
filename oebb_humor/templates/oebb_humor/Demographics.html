{% extends "global/Page.html" %}

{% block styles %}
<link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
/>
<style>
    .page-wrapper {
        max-width: 720px;
        margin: 0 auto;
    }
</style>
{% endblock %}

{% block content %}
<div class="container page-wrapper">
    <h3 class="mb-3">Final questions</h3>

    <p class="mb-3">
        Please answer the following questions. Your responses are anonymous and will only be used for research purposes.
    </p>

    <!-- Age -->
    <div class="mb-3">
        <label for="id_age" class="form-label">Age</label>
        <input
            type="number"
            class="form-control {% if form.age.errors %}is-invalid{% endif %}"
            id="id_age"
            name="age"
            min="18"
            max="99"
            value="{{ age_value }}"
            required
        >
        {% if form.age.errors %}
            <div class="invalid-feedback">
                {{ form.age.errors.0 }}
            </div>
        {% endif %}
    </div>

    <!-- Country of origin -->
    <div class="mb-3">
        <label for="id_country_origin" class="form-label">Country of origin</label>
        <select
            name="country_origin"
            id="id_country_origin"
            class="form-select {% if form.country_origin.errors %}is-invalid{% endif %}"
            required
        >
            <option value="" disabled {% if not selected_country %}selected{% endif %}>
                — Select your country —
            </option>
            {% for c in country_choices %}
                <option value="{{ c }}"{% if selected_country == c %} selected{% endif %}>
                    {{ c }}
                </option>
            {% endfor %}
        </select>
        {% if form.country_origin.errors %}
            <div class="invalid-feedback d-block">
                {{ form.country_origin.errors.0 }}
            </div>
        {% endif %}
    </div>

    <!-- Train frequency (default RadioSelect with labels) -->
    <div class="mb-3">
        <label class="form-label d-block">{{ form.train_frequency.label }}</label>
        {{ form.train_frequency }}
    </div>

    <!-- Gender (default RadioSelect with labels) -->
    <div class="mb-3">
        <label class="form-label d-block">{{ form.gender.label }}</label>
        {{ form.gender }}
    </div>

    <!-- Humor preference with labelled 1–7 options -->
    <div class="mb-3">
        <label class="form-label d-block">{{ form.humor_preference.label }}</label>
        {{ form.humor_preference }}
    </div>

    <!-- Chatbot opinion with labelled 1–7 options -->
    <div class="mb-3">
        <label class="form-label d-block">{{ form.chatbot_opinion.label }}</label>
        {{ form.chatbot_opinion }}
    </div>

    <!-- Feedback -->
    <div class="mb-3">
        <label class="form-label d-block">{{ form.feedback.label }}</label>
        {{ form.feedback }}
    </div>

    <div class="d-flex justify-content-end">
        {{ next_button }}
    </div>
</div>
{% endblock %}
